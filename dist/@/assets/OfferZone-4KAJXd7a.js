import{r as b,S as T,j as e,f as t}from"./index-Cv0MCJep.js";import{D as v,M as y}from"./MainDrawer-D7Kypkxo.js";import{u as O}from"./index.esm-CtzVagC9.js";import{a as w,u as P}from"./useGetDatas-DUx7WE11.js";import{n as D,a as I}from"./toast-DkhCIWt5.js";import{S as L,f as A}from"./Layout-D-JsJcP2.js";import{S as E}from"./Status-Bv5uCwnZ.js";import{E as q}from"./EditDeleteButton-ie0-NJtD.js";import{C as B}from"./CheckBox-BjUk9WJe.js";import{P as M}from"./PageTitle-CDKo5HT-.js";import{u as k}from"./useToggleDrawer-C1UtrQV4.js";import{D as F}from"./DeleteModal-BtvCN7mm.js";import"./spinner-CkndCogW.js";/* empty css                      */import"./iconBase-CHzXLRSI.js";import"./Tooltip-BAEq7O6p.js";import"./react-tooltip.min-CdAfhqXP.js";import"./AdminServices-DHiG2Q7Q.js";import"./CustomerServices-RCtKxH8V.js";import"./CouponServices-Bwlwibye.js";import"./ProductServices-8BRK73zt.js";import"./CurrencyServices-BK8AbJu1.js";import"./useDisableForDemo-DndbcQrQ.js";const H=({refetchData:r})=>{var s;const d=P(),{closeDrawer:j}=b.useContext(T),{data:c,isLoading:o}=w("/products","products"),{handleSubmit:a,register:n,formState:{isSubmitting:m}}=O(),x=async l=>{try{const i=await d.post("/offer-zone/add",l);(i.status===200||i.status===201)&&(D("Offer Added Successfully!"),j(),r())}catch(i){I(i.message||"Something went wrong!")}};return o?e.jsx("div",{children:"Loading..."}):e.jsxs("div",{className:"w-full h-full p-6",children:[e.jsx("h2",{className:"text-2xl font-medium mb-6",children:"Add Offer"}),e.jsx(L,{autoHide:!0,autoHideTimeout:1e3,autoHideDuration:200,style:{height:"calc(100vh - 200px)"},className:"w-full relative dark:bg-gray-700 dark:text-gray-200",children:e.jsx("div",{className:"px-6",children:e.jsxs("form",{onSubmit:a(x),children:[e.jsxs("div",{className:"grid gap-4",children:[e.jsxs(t.Label,{children:[e.jsx("span",{children:"Product Name"}),e.jsxs(t.Select,{className:"mt-1",...n("productId",{required:"Product is required"}),children:[e.jsx("option",{value:"",children:"Select Product"}),(s=c==null?void 0:c.rows)==null?void 0:s.map((l,i)=>e.jsxs("option",{value:l.id,children:[l.productName," - ",l.salesPrice,"৳"]},i))]})]}),e.jsxs(t.Label,{children:[e.jsx("span",{children:"OfferPrice"}),e.jsx(t.Input,{className:"mt-1",type:"number",placeholder:"Enter discount percentage",...n("offerPrice",{required:"price is required"})})]}),e.jsxs(t.Label,{children:[e.jsx("span",{children:"Status"}),e.jsxs(t.Select,{className:"mt-1",...n("status",{required:"Status is required"}),children:[e.jsx("option",{value:"Active",children:"Active"}),e.jsx("option",{value:"Inactive",children:"Inactive"})]})]})]}),e.jsx(v,{title:"Offer",isSubmitting:m})]})})})]})},Z=({offersData:r,isLoading:d,refetch:j,handleUpdate:c,handleModalOpen:o,isCheck:a,setIsCheck:n})=>{var x;const m=s=>{const{id:l,checked:i}=s.target;n([...a,l]),i||n(a.filter(u=>u!==l))};return r&&r.length>0&&(console.log("First offer data:",r[0]),console.log("Offer ID:",(x=r[0])==null?void 0:x.id),console.log("All offer IDs:",r.map(s=>s==null?void 0:s.id))),d?e.jsx(t.TableRow,{children:e.jsx(t.TableCell,{colSpan:8,children:e.jsx("div",{className:"text-center",children:"Loading..."})})}):e.jsx(t.TableBody,{children:r==null?void 0:r.map((s,l)=>{var i,u,h,p,g;return e.jsxs(t.TableRow,{children:[e.jsx(t.TableCell,{children:e.jsx(B,{type:"checkbox",name:(i=s==null?void 0:s.product)==null?void 0:i.productName,id:s==null?void 0:s.id,handleClick:m,isChecked:a==null?void 0:a.includes(s==null?void 0:s.id)})}),e.jsx(t.TableCell,{children:e.jsx("span",{className:"text-sm",children:l+1})}),e.jsx(t.TableCell,{children:e.jsx("span",{className:"text-sm font-medium",children:(u=s.product)==null?void 0:u.productName})}),e.jsx(t.TableCell,{children:e.jsx("span",{className:"text-sm font-medium",children:(h=s==null?void 0:s.product)==null?void 0:h.title})}),e.jsx(t.TableCell,{children:e.jsxs("span",{className:"text-sm",children:[s==null?void 0:s.offerPrice,"৳"]})}),e.jsx(t.TableCell,{children:e.jsx(E,{status:s==null?void 0:s.status})}),e.jsx(t.TableCell,{children:e.jsx(q,{id:s==null?void 0:s.id,title:((p=s==null?void 0:s.product)==null?void 0:p.productName)||((g=s==null?void 0:s.product)==null?void 0:g.title),handleUpdate:c,handleModalOpen:(S,N,C)=>{console.log("Delete clicked with ID:",S),console.log("Offer data:",s),o(S,N,C)},isCheck:a})})]},l)})})},de=()=>{const{toggleDrawer:r}=b.useContext(T),[d,j]=b.useState(""),[c,o]=b.useState([]),{data:a,isLoading:n,refetch:m}=w("/offer-zone","offer-zone"),{title:x,serviceId:s,handleModalOpen:l,handleUpdate:i}=k(),u=a==null?void 0:a.filter(h=>Object.values(h).some(p=>p==null?void 0:p.toString().toLowerCase().includes(d.toLowerCase())));return e.jsxs(e.Fragment,{children:[e.jsx(M,{children:"Offer Zone List"}),e.jsx(F,{id:s,title:x,setIsCheck:o}),e.jsx(y,{children:e.jsx(H,{refetchData:m})}),e.jsx(t.Card,{className:"min-w-0 shadow-xs overflow-hidden bg-white dark:bg-gray-800 mb-5",children:e.jsx(t.CardBody,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"w-full md:w-1/2",children:e.jsx(t.Input,{type:"text",placeholder:"Search offers...",value:d,onChange:h=>j(h.target.value)})}),e.jsx("div",{children:e.jsxs(t.Button,{onClick:r,className:"w-full rounded-md h-12",children:[e.jsx("span",{className:"mr-2",children:e.jsx(A,{})}),"Add Offer"]})})]})})}),e.jsx(t.TableContainer,{children:e.jsxs(t.Table,{children:[e.jsx(t.TableHeader,{children:e.jsxs("tr",{children:[e.jsx(t.TableCell,{children:"Select"}),e.jsx(t.TableCell,{children:"ID"}),e.jsx(t.TableCell,{children:"Name"}),e.jsx(t.TableCell,{children:"Title"}),e.jsx(t.TableCell,{children:"Price"}),e.jsx(t.TableCell,{children:"Status"}),e.jsx(t.TableCell,{children:"Actions"})]})}),e.jsx(Z,{offersData:u,isLoading:n,refetch:m,handleUpdate:i,handleModalOpen:l,isCheck:c,setIsCheck:o})]})})]})};export{de as default};
