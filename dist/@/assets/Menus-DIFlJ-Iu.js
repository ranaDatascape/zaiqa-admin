import{r as u,S as g,j as e,f as s}from"./index-Cv0MCJep.js";import{D as w,M as S}from"./MainDrawer-D7Kypkxo.js";import{u as N}from"./index.esm-CtzVagC9.js";import{u as C,a as T}from"./useGetDatas-DUx7WE11.js";import{a as f,n as b}from"./toast-DkhCIWt5.js";import{S as y,f as M}from"./Layout-D-JsJcP2.js";import{S as v}from"./Status-Bv5uCwnZ.js";import{E as D}from"./EditDeleteButton-ie0-NJtD.js";import{P as E}from"./PageTitle-CDKo5HT-.js";import{u as L}from"./useToggleDrawer-C1UtrQV4.js";import{D as A}from"./DeleteModal-BtvCN7mm.js";import"./spinner-CkndCogW.js";/* empty css                      */import"./iconBase-CHzXLRSI.js";import"./Tooltip-BAEq7O6p.js";import"./react-tooltip.min-CdAfhqXP.js";import"./AdminServices-DHiG2Q7Q.js";import"./CustomerServices-RCtKxH8V.js";import"./CouponServices-Bwlwibye.js";import"./ProductServices-8BRK73zt.js";import"./CurrencyServices-BK8AbJu1.js";import"./useDisableForDemo-DndbcQrQ.js";const I=({id:t,refetch:o})=>{const i=C(),{closeDrawer:l}=u.useContext(g),{handleSubmit:r,register:n,reset:x,setValue:d,formState:{errors:c,isSubmitting:h}}=N();u.useEffect(()=>{t&&(async()=>{try{const a=await i.get(`/menus/${t}`);if(a.status===200){const j=a.data;d("name",j.name),d("description",j.description),d("status",j.status)}}catch{f("Failed to fetch menu data")}})()},[t,d,i]);const p=async m=>{try{if(t)(await i.put(`/menus/${t}`,m)).status===200&&(b("Menu Updated Successfully!"),l(),o(),x());else{const a=await i.post("/menus/add",m);(a.status===200||a.status===201)&&(b("Menu Added Successfully!"),l(),o(),x())}}catch(a){f(a.message||"Something went wrong!")}};return e.jsxs("div",{className:"w-full h-full p-6",children:[e.jsx("h2",{className:"text-2xl font-medium mb-6",children:t?"Edit Menu":"Add Menu"}),e.jsx(y,{autoHide:!0,autoHideTimeout:1e3,autoHideDuration:200,style:{height:"calc(100vh - 200px)"},className:"w-full relative dark:bg-gray-700 dark:text-gray-200",children:e.jsx("div",{className:"px-6",children:e.jsxs("form",{onSubmit:r(p),children:[e.jsxs("div",{className:"grid gap-4",children:[e.jsxs(s.Label,{children:[e.jsx("span",{children:"Menu Name"}),e.jsx(s.Input,{className:"mt-1",type:"text",placeholder:"Enter menu name",...n("name",{required:"Menu name is required"})}),c.name&&e.jsx("span",{className:"text-red-500 text-sm",children:c.name.message})]}),e.jsxs(s.Label,{children:[e.jsx("span",{children:"Menu Description"}),e.jsx(s.Input,{className:"mt-1",type:"text",placeholder:"Enter menu description",...n("description",{required:"Menu description is required"})}),c.description&&e.jsx("span",{className:"text-red-500 text-sm",children:c.description.message})]}),e.jsxs(s.Label,{children:[e.jsx("span",{children:"Status"}),e.jsxs(s.Select,{className:"mt-1",...n("status",{required:"Status is required"}),children:[e.jsx("option",{value:"",children:"Select Status"}),e.jsx("option",{value:"Active",children:"Active"}),e.jsx("option",{value:"Inactive",children:"Inactive"})]}),c.status&&e.jsx("span",{className:"text-red-500 text-sm",children:c.status.message})]})]}),e.jsx(w,{id:t,title:"Menu",isSubmitting:h})]})})})]})},q=({menusData:t,isLoading:o,handleUpdate:i,handleModalOpen:l})=>o?e.jsx(s.TableRow,{children:e.jsx(s.TableCell,{colSpan:6,children:e.jsx("div",{className:"text-center",children:"Loading..."})})}):e.jsx(s.TableBody,{children:t==null?void 0:t.map((r,n)=>e.jsxs(s.TableRow,{children:[e.jsx(s.TableCell,{children:e.jsx("span",{className:"text-sm",children:n+1})}),e.jsx(s.TableCell,{children:e.jsx("span",{className:"text-sm font-medium",children:r.name})}),e.jsx(s.TableCell,{children:e.jsx("span",{className:"text-sm",children:r.description})}),e.jsx(s.TableCell,{children:e.jsx(v,{status:r.status})}),e.jsx(s.TableCell,{children:e.jsx(D,{id:r==null?void 0:r.id,title:r==null?void 0:r.name,handleUpdate:i,handleModalOpen:l,showEdit:!1})})]},n))}),te=()=>{const{toggleDrawer:t}=u.useContext(g),[o,i]=u.useState(""),{data:l,isLoading:r,refetch:n}=T("/menus/","menus"),{title:x,serviceId:d,handleModalOpen:c,handleUpdate:h}=L(),p=l==null?void 0:l.filter(m=>Object.values(m).some(a=>a==null?void 0:a.toString().toLowerCase().includes(o.toLowerCase())));return e.jsxs(e.Fragment,{children:[e.jsx(E,{children:"Menus List"}),e.jsx(A,{id:d,title:x}),e.jsx(S,{children:e.jsx(I,{id:d,refetch:n})}),e.jsx(s.Card,{className:"min-w-0 shadow-xs overflow-hidden bg-white dark:bg-gray-800 mb-5",children:e.jsx(s.CardBody,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"w-full md:w-1/2",children:e.jsx(s.Input,{type:"text",placeholder:"Search menus...",value:o,onChange:m=>i(m.target.value)})}),e.jsx("div",{children:e.jsxs(s.Button,{onClick:t,className:"w-full rounded-md h-12",children:[e.jsx("span",{className:"mr-2",children:e.jsx(M,{})}),"Add Menu"]})})]})})}),e.jsx(s.TableContainer,{children:e.jsxs(s.Table,{children:[e.jsx(s.TableHeader,{children:e.jsxs("tr",{children:[e.jsx(s.TableCell,{children:"ID"}),e.jsx(s.TableCell,{children:"Name"}),e.jsx(s.TableCell,{children:"Description"}),e.jsx(s.TableCell,{children:"Status"}),e.jsx(s.TableCell,{children:"Actions"})]})}),e.jsx(q,{menusData:p,isLoading:r,handleUpdate:h,handleModalOpen:c})]})})]})};export{te as default};
