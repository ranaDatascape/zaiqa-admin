import{r as b,S as v,j as e,f as r,o as C,u as T}from"./index-Cv0MCJep.js";import{D as S,M as E}from"./MainDrawer-D7Kypkxo.js";import{u as D}from"./index.esm-CtzVagC9.js";import{n as x,a as u}from"./toast-DkhCIWt5.js";import{L as m}from"./LabelArea-Bb7qUJrU.js";import{E as p}from"./Error-DhTYXBCu.js";import{T as k}from"./Title-6CzNxVGl.js";import{u as y,a as q}from"./useGetDatas-DUx7WE11.js";import{e as N,g as I,f as P}from"./Layout-D-JsJcP2.js";import{C as F,a as M}from"./CustomerServices-RCtKxH8V.js";import{A as B}from"./AdminServices-DHiG2Q7Q.js";import{C as A}from"./CouponServices-Bwlwibye.js";import{P as L}from"./ProductServices-8BRK73zt.js";import{u as w}from"./useToggleDrawer-C1UtrQV4.js";import{D as O}from"./DeleteModal-BtvCN7mm.js";import{S as R}from"./sweetalert2.esm.all-B0Dix5B2.js";import{P as U}from"./PageTitle-CDKo5HT-.js";import{T as Y}from"./TableLoading-B7jc0TEa.js";import{N as $}from"./NotFound-Kgr5jKYC.js";import"./spinner-CkndCogW.js";/* empty css                      */import"./SelectLanguageTwo-DQqql4G2.js";import"./iconBase-CHzXLRSI.js";import"./CurrencyServices-BK8AbJu1.js";import"./useDisableForDemo-DndbcQrQ.js";import"./index-D52NM8LP.js";const Q=({id:t,refetchData:g})=>{const{toggleDrawer:h}=b.useContext(v),{register:a,handleSubmit:i,setValue:o,clearErrors:c,formState:{errors:l,isSubmitting:s}}=D(),f=y(),j=async d=>{try{const n=new FormData;n.append("title",d.title),n.append("subtitle",d.subtitle),n.append("description",d.description),n.append("capacity",d.capacity),n.append("eventDate",d.eventDate),n.append("eventTime",d.eventTime),n.append("price",d.price),n.append("status",d.status),d.image[0]&&n.append("image",d.image[0]),console.log(d),(await f.post("/events/add?type=events",n)).status===201?(x("Event saved successfully!"),g(),h(),c()):u("Something went wrong!")}catch(n){u("Something went wrong!"),console.error("Error saving event:",n)}};return e.jsxs("div",{className:"w-full relative p-6 border-b border-gray-100 bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-300",children:[e.jsx(k,{title:t?"Update Event":"Add Event"}),e.jsxs("form",{onSubmit:i(j),children:[e.jsxs("div",{className:"px-6 pt-8 flex-grow scrollbar-hide w-full max-h-full pb-40",children:[e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(m,{label:"Event Title"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(r.Input,{...a("title",{required:"Title is required!"}),className:"border h-12 text-sm focus:outline-none block w-full bg-gray-100 dark:bg-gray-700 border-transparent focus:bg-white",placeholder:"Event Title"}),e.jsx(p,{errorName:l.title})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(m,{label:"Subtitle"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(r.Input,{...a("subtitle",{required:"Subtitle is required!"}),className:"border h-12 text-sm focus:outline-none block w-full bg-gray-100 dark:bg-gray-700 border-transparent focus:bg-white",placeholder:"Event Subtitle"}),e.jsx(p,{errorName:l.subtitle})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(m,{label:"Description"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(r.Textarea,{...a("description",{required:"Description is required!"}),className:"border text-sm focus:outline-none block w-full bg-gray-100 dark:bg-gray-700 border-transparent focus:bg-white",rows:"4",placeholder:"Event Description"}),e.jsx(p,{errorName:l.description})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(m,{label:"Capacity"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(r.Input,{...a("capacity",{required:"Capacity is required!",pattern:{value:/^[0-9]+$/,message:"Capacity must be a number!"}}),className:"border h-12 text-sm focus:outline-none block w-full bg-gray-100 dark:bg-gray-700 border-transparent focus:bg-white",placeholder:"Event Capacity",type:"number"}),e.jsx(p,{errorName:l.capacity})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(m,{label:"Event Date"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(r.Input,{...a("eventDate",{required:"Event date is required!"}),className:"border h-12 text-sm focus:outline-none block w-full bg-gray-100 dark:bg-gray-700 border-transparent focus:bg-white",type:"date"}),e.jsx(p,{errorName:l.eventDate})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(m,{label:"Event Time"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(r.Input,{...a("eventTime",{required:"Event time is required!"}),className:"border h-12 text-sm focus:outline-none block w-full bg-gray-100 dark:bg-gray-700 border-transparent focus:bg-white",type:"time"}),e.jsx(p,{errorName:l.eventTime})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(m,{label:"Price"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(r.Input,{...a("price",{required:"Price is required!",pattern:{value:/^\d+(\.\d{1,2})?$/,message:"Price must be a valid number!"}}),className:"border h-12 text-sm focus:outline-none block w-full bg-gray-100 dark:bg-gray-700 border-transparent focus:bg-white",placeholder:"Event Price",type:"number",step:"0.01"}),e.jsx(p,{errorName:l.price})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(m,{label:"Image"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(r.Input,{...a("image",{required:t?!1:"Image is required!"}),className:"border h-12 text-sm focus:outline-none block w-full bg-gray-100 dark:bg-gray-700 border-transparent focus:bg-white",type:"file",accept:"image/*"}),e.jsx(p,{errorName:l.image})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(m,{label:"Status"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsxs(r.Select,{...a("status",{required:"Status is required!"}),className:"border h-12 text-sm focus:outline-none block w-full bg-gray-100 dark:bg-gray-700 border-transparent focus:bg-white",children:[e.jsx("option",{value:"1",children:"Active"}),e.jsx("option",{value:"0",children:"Inactive"})]}),e.jsx(p,{errorName:l.status})]})]})]}),e.jsx(S,{id:t,title:"Event",isSubmitting:s})]})]})},G=({id:t,title:g})=>{const{isModalOpen:h,closeModal:a,setIsUpdate:i}=b.useContext(v),{setServiceId:o}=w(),c=T(),l=()=>{c.pathname==="/products"&&(L.deleteProduct(t).then(s=>{i(!0),x(s.message)}).catch(s=>u(s.message)),a(),o()),c.pathname==="/category"&&(F.deleteCategory(t).then(s=>{i(!0),x(s.message)}).catch(s=>u(s.message)),a(),o()),c.pathname==="/customers"&&(M.deleteCustomer(t).then(s=>{i(!0),x(s.message)}).catch(s=>u(s.message)),a(),o()),c.pathname==="/coupons"&&(A.deleteCoupon(t).then(s=>{i(!0),x(s.message)}).catch(s=>u(s.message)),a(),o()),c.pathname==="/our-staff"&&(B.deleteStaff(t).then(s=>{i(!0),x(s.message)}).catch(s=>u(s.message)),a(),o())};return e.jsx(e.Fragment,{children:e.jsxs(r.Modal,{isOpen:h,onClose:a,children:[e.jsxs(r.ModalBody,{className:"text-center custom-modal px-8 pt-6 pb-4",children:[e.jsx("span",{className:"flex justify-center text-3xl mb-6 text-red-500",children:e.jsx(N,{})}),e.jsxs("h2",{className:"text-xl font-medium mb-1",children:["Are You Sure! Want to Delete"," ",e.jsx("span",{className:"text-red-500",children:g})," Record?"]}),e.jsx("p",{children:"Do you really want to delete these records? You can't view this in your list anymore if you delete!"})]}),e.jsxs(r.ModalFooter,{className:"justify-center",children:[e.jsx(r.Button,{className:"w-full sm:w-auto hover:bg-white hover:border-gray-50",layout:"outline",onClick:a,children:"No, Keep It"}),e.jsx(r.Button,{onClick:l,className:"w-full sm:w-auto",children:"Yes, Delete It"})]})]})})};C.memo(G);const H=t=>t?new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"",K=t=>t?new Date(`1970-01-01T${t}`).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}):"",V=({eventsData:t,isLoading:g,refetch:h})=>{const[a,i]=b.useState(!1),{handleUpdate:o}=w(),c=y(),l=async s=>{R.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(async f=>{if(f.isConfirmed)try{(await c.delete(`/events/delete/${s}`)).status===200?(x("Event deleted successfully!"),window.location.reload()):u("Failed to delete event.")}catch(j){u("Error deleting event."),console.error("Error deleting event:",j)}})};return e.jsxs(e.Fragment,{children:[e.jsx(O,{isModalOpen:a,closeModal:()=>i(!1),handleDelete:l}),e.jsx(r.TableBody,{children:g?e.jsx(r.TableRow,{children:e.jsx(r.TableCell,{colSpan:"8",className:"text-center",children:"Loading..."})}):t==null?void 0:t.map(s=>e.jsxs(r.TableRow,{children:[e.jsx(r.TableCell,{children:e.jsx("span",{className:"font-semibold uppercase text-xs",children:s.id})}),e.jsx(r.TableCell,{children:e.jsx("span",{className:"text-sm",children:s.title})}),e.jsx(r.TableCell,{children:e.jsx("span",{className:"text-sm",children:s.subtitle.length>20?s.subtitle.substr(0,23)+"...":s.subtitle})}),e.jsxs(r.TableCell,{children:[e.jsx("span",{className:"text-sm",children:H(s.eventDate)}),e.jsx("br",{}),e.jsx("span",{className:"text-sm",children:K(s.eventTime)})]}),e.jsx(r.TableCell,{children:e.jsxs("span",{className:"text-sm",children:[s.capacity," persons"]})}),e.jsx(r.TableCell,{children:e.jsxs("span",{className:"text-sm",children:[s.price," à§³ "]})}),e.jsx(r.TableCell,{children:e.jsx(r.Badge,{type:s.status===1?"success":"danger",children:s.status===1?"Active":"Inactive"})}),e.jsx(r.TableCell,{children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"cursor-pointer text-gray-400 hover:text-green-600",children:e.jsx(I,{onClick:()=>o(s.id),className:"text-xl"})}),e.jsx("div",{className:"cursor-pointer text-gray-400 hover:text-red-600",children:e.jsx(N,{onClick:()=>{l(s.id)},className:"text-xl"})})]})})]},s.id))})]})},ye=()=>{const{toggleDrawer:t}=b.useContext(v),[g,h]=b.useState(""),{data:a,isLoading:i,refetch:o}=q("/events/all","events"),c=a==null?void 0:a.filter(l=>Object.values(l).some(s=>s==null?void 0:s.toString().toLowerCase().includes(g.toLowerCase())));return e.jsxs(e.Fragment,{children:[e.jsx(U,{children:"Event Catering List"}),e.jsx(E,{children:e.jsx(Q,{refetchData:o})}),e.jsx(r.Card,{className:"min-w-0 shadow-xs bg-white dark:bg-gray-800 mb-5",children:e.jsx(r.CardBody,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"w-full md:w-1/2",children:e.jsx(r.Input,{type:"text",placeholder:"Search events...",value:g,onChange:l=>h(l.target.value)})}),e.jsx("div",{children:e.jsxs(r.Button,{onClick:t,className:"w-full rounded-md h-12",children:[e.jsx("span",{className:"mr-2",children:e.jsx(P,{})}),"Add Event"]})})]})})}),i?e.jsx(Y,{row:12,col:7,width:160,height:20}):a.length!==0?e.jsx(r.TableContainer,{children:e.jsxs(r.Table,{children:[e.jsx(r.TableHeader,{children:e.jsxs("tr",{children:[e.jsx(r.TableCell,{children:"ID"}),e.jsx(r.TableCell,{children:"Title"}),e.jsx(r.TableCell,{children:"Subtitle"}),e.jsx(r.TableCell,{children:"Date/Time"}),e.jsx(r.TableCell,{children:"Capacity"}),e.jsx(r.TableCell,{children:"Price"}),e.jsx(r.TableCell,{children:"Status"}),e.jsx(r.TableCell,{children:"Actions"})]})}),e.jsx(V,{eventsData:c,isLoading:i,refetch:o})]})}):e.jsx($,{title:"No Event Found",description:"Please add some events"})]})};export{ye as default};
