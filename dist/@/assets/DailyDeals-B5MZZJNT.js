import{r as h,S as g,j as e,f as s}from"./index-Cv0MCJep.js";import{A as D}from"./AnimatedContent-f_qjIjlx.js";import{U as N}from"./UploadMany-DBR_b3kP.js";import{D as C,M as T}from"./MainDrawer-D7Kypkxo.js";import{a as f,u as b}from"./useGetDatas-DUx7WE11.js";import{u as S}from"./index.esm-CtzVagC9.js";import{n as y,a as j}from"./toast-DkhCIWt5.js";import{S as v,e as q,f as L}from"./Layout-D-JsJcP2.js";import{S as P}from"./sweetalert2.esm.all-B0Dix5B2.js";import{P as B}from"./PageTitle-CDKo5HT-.js";import"./exportFromJSON-BvevaQwb.js";import"./iconBase-CHzXLRSI.js";import"./spinner-CkndCogW.js";import"./ProductServices-8BRK73zt.js";/* empty css                      */const E=({refetch:l})=>{var p;const{data:t,isLoading:n}=f("/products","products"),c=b(),{closeDrawer:u}=h.useContext(g),{handleSubmit:d,register:r,reset:a,formState:{errors:i,isSubmitting:m}}=S(),w=async o=>{console.log(o);try{const x=await c.post("/daily-deals/add",o);(x.status===200||x.status===201)&&(y("Daily Deal Added Successfully!"),u(),l(),a())}catch(x){j(x.message||"Something went wrong!")}};return n?e.jsx("div",{children:"Loading..."}):e.jsxs("div",{className:"w-full h-full p-6",children:[e.jsx("h2",{className:"text-2xl font-medium mb-6",children:"Add Daily Deals"}),e.jsx(v,{autoHide:!0,autoHideTimeout:1e3,autoHideDuration:200,style:{height:"calc(100vh - 200px)"},className:"w-full relative dark:bg-gray-700 dark:text-gray-200",children:e.jsx("div",{className:"px-6",children:e.jsxs("form",{onSubmit:d(w),children:[e.jsxs("div",{className:"grid gap-4",children:[e.jsxs(s.Label,{children:[e.jsx("span",{children:"Product Name"}),e.jsxs(s.Select,{className:"mt-1",...r("productId",{required:"Product is required"}),children:[e.jsx("option",{value:"",children:"Select Product"}),(p=t==null?void 0:t.rows)==null?void 0:p.map((o,x)=>e.jsxs("option",{value:o.id,children:[o.productName," - ",o.salesPrice,"à§³"]},x))]})]}),e.jsxs(s.Label,{children:[e.jsx("span",{children:"Deal Price"}),e.jsx(s.Input,{className:"mt-1",type:"number",placeholder:"Enter deal price",...r("price",{required:"Deal price is required",min:{value:0,message:"Price cannot be negative"}})})]}),e.jsxs(s.Label,{children:[e.jsx("span",{children:"Quantity"}),e.jsx(s.Input,{className:"mt-1",type:"number",placeholder:"Enter deal quantity",...r("quantity",{required:"Quantity is required",min:{value:1,message:"Quantity must be at least 1"}})})]}),e.jsxs(s.Label,{children:[e.jsx("span",{children:"Start Date"}),e.jsx(s.Input,{className:"mt-1",type:"datetime-local",...r("startTime",{required:"Start date is required"})})]}),e.jsxs(s.Label,{children:[e.jsx("span",{children:"End Date"}),e.jsx(s.Input,{className:"mt-1",type:"datetime-local",...r("endTime",{required:"End date is required"})})]}),e.jsxs(s.Label,{children:[e.jsx("span",{children:"Status"}),e.jsxs(s.Select,{className:"mt-1",...r("status",{required:"Status is required"}),children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"expired",children:"Inactive"})]})]})]}),e.jsx(C,{title:"Daily Deals",isSubmitting:m})]})})})]})},A=({dailyDealsData:l,isLoading:t,refetchData:n})=>{const c=r=>new Date(r).toLocaleString("en-US",{timeZone:"Asia/Dhaka"}),u=b(),d=async r=>{P.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(async a=>{if(a.isConfirmed)try{(await u.delete(`daily-deals/delete/${r}`)).status===200?(y("DailyDeals deleted successfully!"),n()):j("Failed to delete.")}catch(i){j("Error deleting."),console.error("Error deleting :",i)}})};return t?e.jsx("div",{children:"Loading..."}):e.jsx(s.TableBody,{children:l==null?void 0:l.map((r,a)=>e.jsxs(s.TableRow,{children:[e.jsx(s.TableCell,{children:e.jsx("span",{className:"text-sm",children:a+1})}),e.jsx(s.TableCell,{children:e.jsx("span",{className:"text-sm",children:r==null?void 0:r.product.productName})}),e.jsx(s.TableCell,{children:e.jsx("span",{className:"text-sm",children:r.price})}),e.jsx(s.TableCell,{children:e.jsx("span",{className:"text-sm",children:r.quantity})}),e.jsx(s.TableCell,{children:e.jsx("span",{className:"text-sm",children:c(r.startTime)})}),e.jsx(s.TableCell,{children:e.jsx("span",{className:"text-sm",children:c(r.endTime)})}),e.jsx(s.TableCell,{children:e.jsx("div",{className:"flex justify-center items-center space-x-4",children:e.jsx(s.Button,{onClick:()=>d(r.id),className:"p-2 cursor-pointer text-gray-400 hover:text-red-600",children:e.jsx(q,{})})})})]},a+1))})},K=()=>{const{data:l,isLoading:t,refetch:n}=f("/daily-deals","daily-deals"),{toggleDrawer:c,lang:u}=h.useContext(g),[d,r]=h.useState("");if(t)return e.jsx("h1",{children:"Loading..."});const a=l==null?void 0:l.filter(i=>Object.values(i).some(m=>m==null?void 0:m.toString().toLowerCase().includes(d.toLowerCase())));return e.jsxs(e.Fragment,{children:[e.jsx(B,{children:"Daily Deals List"}),e.jsx(T,{children:e.jsx(E,{refetch:n})}),e.jsxs(D,{children:[e.jsxs(s.Card,{className:"min-w-0 shadow-xs flex justify-between items-center overflow-hidden bg-white dark:bg-gray-800 mb-5",children:[e.jsx(s.CardBody,{className:"flex gap-96",children:e.jsx(N,{title:"Daily Deals",exportData:l})}),e.jsx("div",{className:"w-full md:w-48 lg:w-48 xl:w-48",children:e.jsxs(s.Button,{onClick:c,className:"w-full rounded-md h-12",children:[e.jsx("span",{className:"mr-2",children:e.jsx(L,{})}),"Add Daily Deal"]})})]}),e.jsx(s.Card,{className:"min-w-0 shadow-xs overflow-hidden bg-white dark:bg-gray-800 mb-5",children:e.jsxs(s.CardBody,{className:"py-3 grid gap-4 lg:gap-6 xl:gap-6 md:flex xl:flex",children:[e.jsx("div",{className:"flex-grow-0 md:flex-grow lg:flex-grow xl:flex-grow",children:e.jsx(s.Input,{type:"search",placeholder:"Search Daily Deals...",value:d,onChange:i=>r(i.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})}),e.jsx("div",{className:"flex items-center gap-2 flex-grow-0 md:flex-grow lg:flex-grow xl:flex-grow",children:e.jsx("div",{className:"w-1/3",children:e.jsx(s.Button,{onClick:()=>r(""),type:"submit",className:"h-12 w-full bg-emerald-700",children:"Reset"})})})]})}),e.jsx(s.TableContainer,{children:e.jsxs(s.Table,{children:[e.jsx(s.TableHeader,{children:e.jsxs("tr",{children:[e.jsx(s.TableCell,{children:"Id"}),e.jsx(s.TableCell,{children:"Product Name"}),e.jsx(s.TableCell,{children:"Deal Price"}),e.jsx(s.TableCell,{children:"Deal Quantity"}),e.jsx(s.TableCell,{children:"Start Date"}),e.jsx(s.TableCell,{children:"End Date"}),e.jsx(s.TableCell,{children:"Actions"})]})}),e.jsx(A,{dailyDealsData:a,isLoading:t,refetchData:n})]})})]})]})};export{K as default};
