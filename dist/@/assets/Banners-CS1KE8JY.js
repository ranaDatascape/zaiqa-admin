import{j as e,f as s,r as m,S as w}from"./index-Cv0MCJep.js";import{a as D}from"./index.prod-dN6d4wYn.js";import{u as y,a as A}from"./useGetDatas-DUx7WE11.js";import{n as f,a as c}from"./toast-DkhCIWt5.js";import{e as F,S as E,f as I}from"./Layout-D-JsJcP2.js";import{S as k}from"./sweetalert2.esm.all-B0Dix5B2.js";import{A as P}from"./AnimatedContent-f_qjIjlx.js";import{L as x}from"./LabelArea-Bb7qUJrU.js";import{I as N}from"./InputArea-C4k6rcIG.js";import{u as L}from"./index.esm-CtzVagC9.js";import{D as R,M as q}from"./MainDrawer-D7Kypkxo.js";import{P as z}from"./PageTitle-CDKo5HT-.js";/* empty css                      */import"./iconBase-CHzXLRSI.js";import"./spinner-CkndCogW.js";const T="http://localhost:5055/api",M=({data:t,isLoading:a,refetch:n})=>{const i=y(),b=async l=>{try{(await i.put(`/banners/status/${l}`)).status===200?(f("Status updated successfully!"),n()):c("Failed to update status.")}catch(o){c("Error updating status."),console.error("Error updating status:",o)}},u=async l=>{k.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(async o=>{if(o.isConfirmed)try{(await i.delete(`/banners/${l}`)).status===200?(f("Banner deleted successfully!"),n()):c("Failed to delete banner.")}catch(p){c("Error deleting banner."),console.error("Error deleting banner:",p)}})};return e.jsx(e.Fragment,{children:a?e.jsx("p",{className:"text-center text-lg font-semibold",children:"Loading..."}):(t==null?void 0:t.length)>0?e.jsx(s.TableBody,{children:t==null?void 0:t.map(l=>e.jsxs(s.TableRow,{children:[e.jsx(s.TableCell,{className:"font-semibold uppercase text-xs",children:l.id}),e.jsx(s.TableCell,{className:"font-medium text-sm",children:l.title}),e.jsx(s.TableCell,{className:"font-medium text-sm",children:e.jsx("img",{src:T+(l==null?void 0:l.image),alt:l.title,className:"w-20 h-20 object-cover rounded-full"})}),e.jsx(s.TableCell,{className:"font-medium text-sm",children:e.jsx("img",{src:T+l.image_thumb,alt:l.title,className:"w-20 h-20 object-cover rounded-full"})}),e.jsx(s.TableCell,{className:"font-medium text-sm",children:l.status==="Active"?e.jsx("span",{className:"text-green-500 font-semibold",children:"Active"}):e.jsx("span",{className:"text-red-500 font-semibold",children:"Inactive"})}),e.jsx(s.TableCell,{children:e.jsx(D,{onChange:()=>b(l.id),checked:l.status==="Active",onColor:"#10B981",offColor:"#EF4444",uncheckedIcon:!1,checkedIcon:!1})}),e.jsx(s.TableCell,{children:e.jsx(s.Button,{layout:"link",size:"icon","aria-label":"Delete",onClick:()=>u(l.id),children:e.jsx(F,{className:"text-red-500 text-2xl"})})})]},l.id))}):e.jsx("p",{className:"text-center text-lg font-semibold text-red-500",children:"No banners available."})})},U=({refetch:t})=>{const{register:a,handleSubmit:n,reset:i,formState:{errors:b,isSubmitting:u}}=L(),l=y(),{closeDrawer:o}=m.useContext(w),[p,h]=m.useState(null),[C,g]=m.useState(null),[_,Y]=m.useState(""),B=d=>{const r=d.target.files[0],v=5*1024*1024;if(r.size>v){c("Image size must be less than 5MB."),h(null),g(null);return}r&&(h(r),g(URL.createObjectURL(r)))},S=async d=>{try{const r=new FormData;for(const j in d)j==="image"?r.append("image",d.image[0]):r.append(j,d[j]);(await l.post("/banners/add?type=banners",r,{headers:{"Content-Type":"multipart/form-data"}})).status===201&&(f("Banner created successfully."),i(),o(),g(null),h(null),t())}catch{c("Banner creation failed.")}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx("h1",{className:"text-4xl text-center mt-4",children:"Add Banner"})}),e.jsx(E,{children:e.jsx("form",{onSubmit:n(S),children:e.jsxs("div",{className:"px-6 pt-8 flex-grow scrollbar-hide w-full max-h-full",children:[e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(x,{label:"Banner Title"}),e.jsx("div",{className:"col-span-6 sm:col-span-4",children:e.jsx(N,{required:!0,register:a,name:"title",type:"text",placeholder:"Please Enter Title"})})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6 relative",children:[e.jsx(x,{label:"Description"}),e.jsx("div",{className:"col-span-6 sm:col-span-4",children:e.jsx(N,{required:!0,register:a,name:"description",type:"text",placeholder:"Enter Description"})})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6 relative",children:[e.jsx(x,{label:"Images"}),e.jsx("div",{className:"col-span-6 sm:col-span-4",children:e.jsx("input",{...a("image",{required:!0}),type:"file",accept:"image/*",onChange:B,className:"border border-gray-300 rounded-lg p-2 block w-full cursor-pointer"})}),C&&e.jsx("img",{src:C,alt:"Preview",className:"mt-2 w-32 h-32 object-cover rounded-lg"})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6 relative",children:[e.jsx(x,{label:"Status"}),e.jsx("div",{className:"col-span-6 sm:col-span-4",children:e.jsxs("select",{...a("status",{required:!0}),className:"border border-gray-300 rounded-lg p-2 block w-full bg-white",children:[e.jsx("option",{value:"1",children:"Active"}),e.jsx("option",{value:"0",children:"Inactive"})]})})]}),e.jsx(R,{isSubmitting:u})]})})})]})},re=()=>{const{data:t,isLoading:a,refetch:n}=A("/banners/getall","allbanners"),{toggleDrawer:i}=m.useContext(w);return e.jsxs(e.Fragment,{children:[e.jsx(z,{children:"Banner List"}),e.jsx(q,{children:e.jsx(U,{refetch:n})}),e.jsx(P,{children:e.jsx("div",{className:"w-full flex justify-end mb-12 items-end",children:e.jsxs(s.Button,{onClick:i,className:"w-2/12 rounded-md h-12",children:[e.jsx("span",{className:"mr-2",children:e.jsx(I,{})}),"Add Banner"]})})}),e.jsx(s.TableContainer,{children:e.jsxs(s.Table,{children:[e.jsx(s.TableHeader,{children:e.jsxs("tr",{children:[e.jsx(s.TableCell,{children:"ID"}),e.jsx(s.TableCell,{children:"Name"}),e.jsx(s.TableCell,{children:"Image"}),e.jsx(s.TableCell,{children:"Image_Thumb"}),e.jsx(s.TableCell,{children:"Status"}),e.jsx(s.TableCell,{children:"Action"}),e.jsx(s.TableCell,{children:"Delete"})]})}),e.jsx(M,{data:t,isLoading:a,refetch:n})]})})]})};export{re as default};
