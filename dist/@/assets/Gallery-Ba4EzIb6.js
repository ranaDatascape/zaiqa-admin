import{r as j,S as g,j as e,f as t}from"./index-Cv0MCJep.js";import{P as w}from"./PageTitle-CDKo5HT-.js";import{D as N,M as S}from"./MainDrawer-D7Kypkxo.js";import{S as A,e as I}from"./Layout-D-JsJcP2.js";import{u as y}from"./index.esm-CtzVagC9.js";import{u as C,a as B}from"./useGetDatas-DUx7WE11.js";import{a as d,n as b}from"./toast-DkhCIWt5.js";import{L as p}from"./LabelArea-Bb7qUJrU.js";import{S as D}from"./sweetalert2.esm.all-B0Dix5B2.js";import{a as F}from"./index.prod-dN6d4wYn.js";import{A as G}from"./AnimatedContent-f_qjIjlx.js";import"./spinner-CkndCogW.js";import"./iconBase-CHzXLRSI.js";/* empty css                      */const k=({refetch:r})=>{const{register:i,handleSubmit:c,reset:n,formState:{isSubmitting:u}}=y(),h=C(),{closeDrawer:s}=j.useContext(g),[a,m]=j.useState(null),T=x=>{const o=x.target.files[0],l=5*1024*1024;if(o.size>l){d("Image size must be less than 5MB."),m(null);return}o&&m(URL.createObjectURL(o))},v=async x=>{const o=new FormData;for(const l in x)l==="image"?o.append("image",x.image[0]):o.append(l,x[l]);try{(await h.post("/gallery/add?type=gallery",o,{headers:{"Content-Type":"multipart/form-data"}})).status===200&&(b("Gallery image added successfully."),n(),s(),m(null),r())}catch(l){console.error("Gallery image creation failed:",l),d("Gallery image creation failed.")}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx("h1",{className:"text-4xl text-center mt-4",children:"Add Gallery Image"})}),e.jsx(A,{children:e.jsx("form",{onSubmit:c(v),children:e.jsxs("div",{className:"px-6 pt-8 flex-grow scrollbar-hide w-full max-h-full",children:[e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(p,{label:"Image Title"}),e.jsx("div",{className:"col-span-6 sm:col-span-4",children:e.jsx("input",{...i("title",{required:!0}),name:"title",type:"text",placeholder:"Gallery image title",className:"border border-gray-300 rounded-lg p-2 block w-full"})})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(p,{label:"Image"}),e.jsxs("div",{className:"col-span-6 sm:col-span-4",children:[e.jsx("input",{...i("image",{required:!0}),type:"file",accept:"image/*",onChange:T,className:"border border-gray-300 rounded-lg p-2 block w-full cursor-pointer"}),a&&e.jsx("img",{src:a,alt:"Preview",className:"mt-2 w-32 h-32 object-cover rounded-lg"})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(p,{label:"Status"}),e.jsx("div",{className:"col-span-6 sm:col-span-4",children:e.jsxs("select",{...i("status",{required:!0}),className:"border border-gray-300 rounded-lg p-2 block w-full bg-white",children:[e.jsx("option",{value:"Active",children:"Active"}),e.jsx("option",{value:"Inactive",children:"Inactive"})]})})]}),e.jsx(N,{title:"Gallery",isSubmitting:u})]})})})]})},f="http://localhost:5055/api",E=({galleries:r,isLoading:i,refetch:c})=>{const n=C();if(i)return e.jsx("p",{children:"Loading..."});const u=async s=>{try{(await n.put(`/gallery/status/${s}`)).status===200?(b("Status updated successfully!"),c()):d("Failed to update status.")}catch(a){d("Error updating status."),console.error("Error updating status:",a)}},h=async s=>{D.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(async a=>{if(a.isConfirmed)try{(await n.delete(`/gallery/delete/${s}`)).status===200?(b("Image deleted successfully!"),c()):d("Failed to delete banner.")}catch{d("Error deleting banner.")}})};return e.jsx(e.Fragment,{children:e.jsx(t.TableBody,{children:r==null?void 0:r.map((s,a)=>e.jsxs(t.TableRow,{children:[e.jsx(t.TableCell,{children:e.jsx("span",{className:"font-semibold uppercase text-sm",children:s==null?void 0:s.id})}),e.jsx(t.TableCell,{children:e.jsx("span",{children:s==null?void 0:s.title})}),e.jsx(t.TableCell,{children:e.jsx("div",{className:"flex items-center",children:e.jsx("img",{className:"h-12 w-12 rounded-lg object-cover",src:f+(s==null?void 0:s.image),alt:s.title})})}),e.jsx(t.TableCell,{children:e.jsx("div",{className:"flex items-center",children:e.jsx("img",{className:"h-12 w-12 rounded-lg object-cover",src:f+(s==null?void 0:s.image),alt:s.title})})}),e.jsx(t.TableCell,{children:e.jsx("span",{style:{color:s.status==="Active"?"#10B981":"#EF4444",fontWeight:"bold"},children:s.status})}),e.jsx(t.TableCell,{children:e.jsx(F,{onChange:()=>u(s.id),checked:s.status==="Active",onColor:"#10B981",offColor:"#EF4444",uncheckedIcon:!1,checkedIcon:!1})}),e.jsx(t.TableCell,{children:e.jsx(t.Button,{layout:"link",size:"icon","aria-label":"Delete",onClick:()=>h(s==null?void 0:s.id),children:e.jsx(I,{className:"text-red-500 text-2xl"})})})]},a))})})},K=()=>{const{toggleDrawer:r}=j.useContext(g),{data:i,isLoading:c,refetch:n}=B("/gallery","gallery");return e.jsxs(e.Fragment,{children:[e.jsx(w,{children:"Gallery"}),e.jsx(S,{children:e.jsx(k,{refetch:n})}),e.jsxs(G,{children:[e.jsx("div",{className:"flex justify-end",children:e.jsx(t.Button,{onClick:r,className:"mb-4",children:"Add Gallery Image"})}),e.jsx(t.TableContainer,{children:e.jsxs(t.Table,{children:[e.jsx(t.TableHeader,{children:e.jsxs("tr",{children:[e.jsx(t.TableCell,{children:"Id"}),e.jsx(t.TableCell,{children:"Title"}),e.jsx(t.TableCell,{children:"Image"}),e.jsx(t.TableCell,{children:"Image_thumb"}),e.jsx(t.TableCell,{children:"Status"}),e.jsx(t.TableCell,{children:"Actions"}),e.jsx(t.TableCell,{children:"Delete"})]})}),e.jsx(E,{galleries:i,isLoading:c,refetch:n})]})})]})]})};export{K as default};
