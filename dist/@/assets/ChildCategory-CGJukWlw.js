import{s as R,r as n,S as U,i as H,j as e,k as y,f as s}from"./index-Cv0MCJep.js";import{u as V,h as $,f as q,g as z,e as G}from"./Layout-D-JsJcP2.js";import{a as J}from"./CategoryTable-B9eSlEYj.js";import{B as K}from"./BulkActionDrawer-BLTFmZ0T.js";import{C as O}from"./CheckBox-BjUk9WJe.js";import{D as Q}from"./DeleteModal-BtvCN7mm.js";import{L as W}from"./Loading-B8HNEKEf.js";import{N as X}from"./NotFound-Kgr5jKYC.js";import{P as Y}from"./PageTitle-CDKo5HT-.js";import{u as Z}from"./useAsync-Dx79ITIc.js";import{u as ee}from"./useFilter-BVpARHJI.js";import{u as se}from"./useToggleDrawer-C1UtrQV4.js";import{C as te}from"./CustomerServices-RCtKxH8V.js";import{A as re}from"./AnimatedContent-f_qjIjlx.js";import"./iconBase-CHzXLRSI.js";/* empty css                      */import"./MainDrawer-D7Kypkxo.js";import"./spinner-CkndCogW.js";import"./toast-DkhCIWt5.js";import"./Error-DhTYXBCu.js";import"./InputArea-C4k6rcIG.js";import"./LabelArea-Bb7qUJrU.js";import"./useGetDatas-DUx7WE11.js";import"./quill.snow-5yXoS7a5.js";import"./index.esm-CtzVagC9.js";import"./index.prod-dN6d4wYn.js";import"./EditDeleteButton-ie0-NJtD.js";import"./Tooltip-BAEq7O6p.js";import"./react-tooltip.min-CdAfhqXP.js";import"./index-LNM3yfuz.js";import"./Tree-B5pXmuyD.js";import"./Title-6CzNxVGl.js";import"./SelectLanguageTwo-DQqql4G2.js";import"./SwitchToggle-CYdqVLVE.js";import"./TextAreaCom-BOROZaGH.js";import"./useDisableForDemo-DndbcQrQ.js";import"./CouponServices-Bwlwibye.js";import"./CurrencyServices-BK8AbJu1.js";import"./ProductServices-8BRK73zt.js";import"./AdminServices-DHiG2Q7Q.js";import"./browser-DAe6cXmg.js";import"./index-CgSWhKad.js";const Je=()=>{const{id:c}=R(),[d,A]=n.useState([]),[g,v]=n.useState([]),[j,P]=n.useState(!1),[m,x]=n.useState([]),{toggleDrawer:S,lang:b}=n.useContext(U),{handleDeleteMany:F,allId:T,handleUpdateMany:B}=se(),{data:h,loading:p,error:N}=Z(te.getAllCategory),{showingTranslateValue:D}=V(),{t:r}=H();n.useEffect(()=>{var k,w;const i=(t,o,a=[])=>{for(let l of o){if(l._id===t)return a.concat(l);const f=i(t,l==null?void 0:l.children,a==null?void 0:a.concat(l));if(f)return f}},u=(t,o)=>{var a;return t._id===o?t:(a=t==null?void 0:t.children)==null?void 0:a.reduce((l,f)=>l??u(f,o),void 0)};if(!p){const t=u(h[0],c),o=i(c,(k=h[0])==null?void 0:k.children);((w=t==null?void 0:t.children)==null?void 0:w.length)>0&&(A(t==null?void 0:t.children),v(o))}},[c,p,h,d]);const{totalResults:I,resultsPerPage:E,dataTable:_,serviceData:C,handleChangePage:L}=ee(d),M=()=>{P(!j),x(d==null?void 0:d.map(i=>i._id)),j&&x([])};return e.jsxs(e.Fragment,{children:[e.jsx(Y,{children:r("CategoryPageTitle")}),e.jsx(Q,{ids:T,setIsCheck:x,category:!0}),e.jsx(K,{ids:T,title:"Child Categories",lang:b,data:h,childId:c}),e.jsxs(re,{children:[e.jsx("div",{className:"flex items-center pb-4",children:e.jsxs("ol",{className:"flex items-center w-full overflow-hidden font-serif",children:[e.jsx("li",{className:"text-sm pr-1 transition duration-200 ease-in cursor-pointer hover:text-emerald-500 font-semibold",children:e.jsx(y,{to:"/categories",children:r("Categories")})}),g==null?void 0:g.map((i,u)=>e.jsxs("span",{className:"flex items-center font-serif",children:[e.jsxs("li",{className:"text-sm mt-[1px]",children:[" ",e.jsx($,{})," "]}),e.jsx("li",{className:"text-sm pl-1 transition duration-200 ease-in cursor-pointer text-blue-700 hover:text-emerald-500 font-semibold ",children:e.jsx(y,{to:`/categories/${i._id}`,children:D(i==null?void 0:i.name)})})]},u+1))]})}),e.jsx(s.Card,{className:"min-w-0 shadow-xs overflow-hidden bg-white dark:bg-gray-800 mb-5",children:e.jsx(s.CardBody,{children:e.jsxs("div",{className:"flex justify-end items-end",children:[e.jsxs(s.Button,{onClick:S,className:"rounded-md h-12",children:[e.jsx("span",{className:"mr-3",children:e.jsx(q,{})}),r("AddCategory")]}),e.jsx("div",{className:"ml-3 w-full md:w-24 lg:w-24 xl:w-24",children:e.jsxs(s.Button,{disabled:m.length<1,onClick:()=>B(m),className:"w-full rounded-md h-12",children:[e.jsx(z,{}),r("BulkAction")]})}),e.jsxs(s.Button,{disabled:m.length<1,onClick:()=>F(m),className:"ml-3 rounded-md h-12 bg-red-500",children:[e.jsx("span",{className:"mr-3",children:e.jsx(G,{})}),r("Delete")]})]})})})]}),p?e.jsx(W,{loading:p}):N?e.jsx("span",{className:"text-center mx-auto text-red-500",children:N}):(C==null?void 0:C.length)!==0?e.jsxs(s.TableContainer,{className:"mb-8",children:[e.jsxs(s.Table,{children:[e.jsx(s.TableHeader,{children:e.jsxs("tr",{children:[e.jsx(s.TableCell,{children:e.jsx(O,{type:"checkbox",name:"selectAll",id:"selectAll",handleClick:M,isChecked:j})}),e.jsx(s.TableCell,{children:r("catIdTbl")}),e.jsx(s.TableCell,{children:r("catIconTbl")}),e.jsx(s.TableCell,{children:r("Name")}),e.jsx(s.TableCell,{children:r("Description")}),e.jsx(s.TableCell,{className:"text-center",children:r("catPublishedTbl")}),e.jsx(s.TableCell,{className:"text-right",children:r("catActionsTbl")})]})}),e.jsx(J,{categories:_,data:h,lang:b,isCheck:m,setIsCheck:x,useParamId:c})]}),e.jsx(s.TableFooter,{children:e.jsx(s.Pagination,{totalResults:I,resultsPerPage:E,onChange:L,label:"Table navigation"})})]}):e.jsx(X,{title:"Sorry, There are no categories right now."})]})};export{Je as default};
