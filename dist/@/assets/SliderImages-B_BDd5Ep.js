import{r as h,S as j,j as e,f as s}from"./index-Cv0MCJep.js";import{P as w}from"./PageTitle-CDKo5HT-.js";import{D as y,M as I}from"./MainDrawer-D7Kypkxo.js";import{u as k}from"./index.esm-CtzVagC9.js";import{u as b,a as D}from"./useGetDatas-DUx7WE11.js";import{a as f,n as N}from"./toast-DkhCIWt5.js";import{S as F,e as A,f as L}from"./Layout-D-JsJcP2.js";import{L as m}from"./LabelArea-Bb7qUJrU.js";import{A as P}from"./AnimatedContent-f_qjIjlx.js";import"./spinner-CkndCogW.js";/* empty css                      */import"./iconBase-CHzXLRSI.js";const E=({refetch:i})=>{const n=b(),{closeDrawer:c}=h.useContext(j),[x,d]=h.useState(null),[l,t]=h.useState(null),{handleSubmit:p,register:a,reset:v,formState:{errors:R,isSubmitting:S}}=k(),T=o=>{const r=o.target.files[0],g=5*1024*1024;if(r.size>g){f("Image size must be less than 5MB."),d(null),t(null);return}r&&(d(r),t(URL.createObjectURL(r)))},C=async o=>{try{const r=new FormData;for(const u in o)u==="image"?r.append("image",o.image[0]):r.append(u,o[u]);(await n.post("/slider-image/add?type=slider",r,{headers:{"Content-Type":"multipart/form-data"}})).status===200&&(N("Slider Image Added Successfully!"),v(),c(),t(null),d(null),i())}catch(r){console.error(r)}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx("h1",{className:"text-4xl text-center mt-4",children:"Add Slider Image"})}),e.jsx(F,{children:e.jsx("form",{onSubmit:p(C),children:e.jsxs("div",{className:"px-6 pt-8 flex-grow scrollbar-hide w-full max-h-full",children:[e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(m,{label:"Slider Title"}),e.jsx("div",{className:"col-span-6 sm:col-span-4",children:e.jsx(s.Input,{className:"mt-1",type:"text",placeholder:"Enter slider title",...a("title",{required:"Title is required"})})})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6 relative",children:[e.jsx(m,{label:"Images"}),e.jsx("div",{className:"col-span-6 sm:col-span-4",children:e.jsx("input",{...a("image",{required:!0}),type:"file",accept:"image/*",onChange:T,className:"border border-gray-300 rounded-lg p-2 block w-full cursor-pointer"})}),l&&e.jsx("img",{src:l,alt:"Preview",className:"mt-2 w-32 h-32 object-cover rounded-lg"})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(m,{label:"Position"}),e.jsx("div",{className:"col-span-6 sm:col-span-4",children:e.jsxs(s.Select,{className:"mt-1 w-full",...a("position",{required:"Enter position number"}),children:[e.jsx("option",{value:"1",children:"Slider"}),e.jsx("option",{value:"2",children:"Frist"}),e.jsx("option",{value:"3",children:"Second"}),e.jsx("option",{value:"4",children:"Third"}),e.jsx("option",{value:"5",children:"Fourth"})]})})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(m,{label:"Link"}),e.jsx("div",{className:"col-span-6 sm:col-span-4",children:e.jsx(s.Input,{className:"mt-1",type:"text",placeholder:"Enter slider link",...a("link",{required:"Link is required"})})})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-40 relative",children:[e.jsx(m,{label:"Status"}),e.jsx("div",{className:"col-span-6 sm:col-span-4",children:e.jsxs("select",{...a("status",{required:!0}),className:"border border-gray-300 rounded-lg p-2 block w-full bg-white",children:[e.jsx("option",{value:"1",children:"Active"}),e.jsx("option",{value:"0",children:"Inactive"})]})})]}),e.jsx(y,{title:"Slider",isSubmitting:S})]})})})]})},q="http://localhost:5055/api",B=({data:i,isLoading:n,refetch:c})=>{const x=b();if(n)return e.jsx("div",{children:"Loading..."});const d=async l=>{var t,p;try{(await x.delete(`/slider-image/delete/${l}`)).status===200&&(N("Item deleted successfully."),c())}catch(a){console.error(a),f(((p=(t=a.response)==null?void 0:t.data)==null?void 0:p.message)||"An error occurred while deleting the item.")}};return e.jsx(e.Fragment,{children:n?e.jsx("p",{className:"text-center text-lg font-semibold",children:"Loading..."}):(i==null?void 0:i.length)>0?e.jsx(s.TableBody,{children:i.map((l,t)=>e.jsxs(s.TableRow,{children:[e.jsx(s.TableCell,{children:e.jsx("span",{className:"text-sm",children:l.id})}),e.jsx(s.TableCell,{children:e.jsx("span",{className:"text-sm",children:l.title})}),e.jsx(s.TableCell,{children:e.jsx("img",{src:q+(l==null?void 0:l.image),alt:l.title,className:"w-20 h-20 object-cover rounded-full"})}),e.jsx(s.TableCell,{children:e.jsx("span",{className:"text-sm",children:l.position})}),e.jsx(s.TableCell,{children:e.jsx("span",{className:"text-sm",children:l.link})}),e.jsx(s.TableCell,{children:e.jsx("span",{className:"text-sm text-green-500",children:l.status})}),e.jsx(s.TableCell,{children:e.jsx(s.Button,{layout:"link",size:"icon","aria-label":"Delete",onClick:()=>d(l.id),children:e.jsx(A,{className:"text-red-500 text-2xl"})})})]},t))}):e.jsx("p",{className:"text-center text-lg font-semibold",children:"No data found!"})})},W=()=>{const{data:i,isLoading:n,refetch:c}=D("/slider-image/all","sliderimages"),{toggleDrawer:x}=h.useContext(j);return e.jsxs(e.Fragment,{children:[e.jsx(w,{children:"Slider Images"}),e.jsx(I,{children:e.jsx(E,{refetch:c})}),e.jsx(P,{children:e.jsx("div",{className:"w-full flex justify-end mb-12 items-end",children:e.jsxs(s.Button,{onClick:x,className:"w-2/12 rounded-md h-12",children:[e.jsx("span",{className:"mr-2",children:e.jsx(L,{})}),"Add Image"]})})}),e.jsx(s.TableContainer,{children:e.jsxs(s.Table,{children:[e.jsx(s.TableHeader,{children:e.jsxs("tr",{children:[e.jsx(s.TableCell,{children:"ID"}),e.jsx(s.TableCell,{children:"Title"}),e.jsx(s.TableCell,{children:"Image"}),e.jsx(s.TableCell,{children:"Position"}),e.jsx(s.TableCell,{children:"Link"}),e.jsx(s.TableCell,{children:"Status"}),e.jsx(s.TableCell,{children:"Action"})]})}),e.jsx(B,{data:i,isLoading:n,refetch:c})]})})]})};export{W as default};
