import{r as u,S as C,j as e,f as a}from"./index-Cv0MCJep.js";import{P as D}from"./PageTitle-CDKo5HT-.js";import{D as k,M as A}from"./MainDrawer-D7Kypkxo.js";import{S as F,e as B}from"./Layout-D-JsJcP2.js";import{u as E}from"./index.esm-CtzVagC9.js";import{u as y,a as I}from"./useGetDatas-DUx7WE11.js";import{a as g,n as v}from"./toast-DkhCIWt5.js";import{L as d}from"./LabelArea-Bb7qUJrU.js";import{I as f}from"./InputArea-C4k6rcIG.js";import{T as P}from"./TextAreaCom-BOROZaGH.js";import{S as L}from"./Status-Bv5uCwnZ.js";import{S as M}from"./sweetalert2.esm.all-B0Dix5B2.js";import{a as R}from"./index.prod-dN6d4wYn.js";import{A as z}from"./AnimatedContent-f_qjIjlx.js";import"./spinner-CkndCogW.js";import"./iconBase-CHzXLRSI.js";/* empty css                      */const q=({refetch:i})=>{const{register:l,handleSubmit:m,reset:o,formState:{errors:T,isSubmitting:h}}=E(),s=y(),{closeDrawer:n}=u.useContext(C),[p,j]=u.useState(null),[N,b]=u.useState(null),w=t=>{const c=t.target.files[0],x=5*1024*1024;if(c.size>x){g("Image size must be less than 5MB."),j(null),b(null);return}c&&(j(c),b(URL.createObjectURL(c)))},S=async t=>{var c,x;try{const r=new FormData;r.append("name",t.name),r.append("message",t.message),r.append("designation",t.designation),r.append("rating",t.rating),r.append("serialNumber",t.serialNumber),r.append("status",t.status),p&&r.append("image",p),(await s.post("/testimonials/add?type=testimonials",r,{headers:{"Content-Type":"multipart/form-data"}})).status===201&&(v("Testimonial added successfully!"),o(),n(),b(null),j(null),i())}catch(r){console.error("Testimonial creation failed:",r),g(((x=(c=r.response)==null?void 0:c.data)==null?void 0:x.message)||"Testimonial creation failed!")}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full relative p-6 border-b border-gray-100 bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-300",children:e.jsx("h4",{children:"Add Testimonial"})}),e.jsx(F,{className:"w-full md:w-7/12 lg:w-8/12 xl:w-8/12 relative dark:bg-gray-700 dark:text-gray-200",children:e.jsxs("form",{onSubmit:m(S),children:[e.jsxs("div",{className:"p-6 flex-grow scrollbar-hide w-full max-h-full pb-40",children:[e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(d,{label:"Client Name"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(f,{register:l,label:"Client Name",name:"name",type:"text",placeholder:"Client Name"})})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(d,{label:"Message"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(P,{register:l,label:"Message",name:"message",type:"text",placeholder:"Message"})})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(d,{label:"Designation"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(f,{register:l,label:"Designation",name:"designation",type:"text",placeholder:"Designation"})})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(d,{label:"Image"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx("input",{...l("image",{required:!0}),type:"file",accept:"image/*",onChange:w,className:"border border-gray-300 rounded-lg p-2 block w-full cursor-pointer"}),N&&e.jsx("img",{src:N,alt:"Preview",className:"mt-2 w-32 h-32 object-cover rounded-lg"})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(d,{label:"Rating"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsxs("select",{...l("rating",{required:"Please select a rating"}),className:"bg-[rgba(131,130,130,0.13)] w-full p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-indigo-400",children:[e.jsx("option",{value:"",children:"Select rating"}),e.jsx("option",{value:"1",children:"1 Star"}),e.jsx("option",{value:"2",children:"2 Stars"}),e.jsx("option",{value:"3",children:"3 Stars"}),e.jsx("option",{value:"4",children:"4 Stars"}),e.jsx("option",{value:"5",children:"5 Stars"})]})})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(d,{label:"Serial Number"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(f,{register:l,label:"serialNumber",name:"serialNumber",type:"number",placeholder:"serialNumber"})})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(d,{label:"Status"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsxs("select",{name:"status",...l("status",{required:!0}),className:"border h-12 text-sm focus:outline-none block w-full bg-gray-100 dark:bg-white border-transparent focus:bg-white",children:[e.jsx("option",{value:"Active",children:"Active"}),e.jsx("option",{value:"Inactive",children:"Inactive"})]})})]})]}),e.jsx(k,{title:"Testimonial",isSubmitting:h})]})})]})},U="http://localhost:5055/api",Y=({testimonials:i,isLoading:l,refetch:m})=>{const o=y(),T=async s=>{try{(await o.patch(`/testimonials/status/${s}`)).status===200?(v("Status updated successfully!"),m()):g("Failed to update status.")}catch(n){g("Error updating status."),console.error("Error updating status:",n)}},h=async s=>{M.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(async n=>{if(n.isConfirmed)try{(await o.delete(`/testimonials/${s}`)).status===200?(v("Testimonials deleted successfully!"),m()):g("Failed to delete Testimonials.")}catch(p){g("Error deleting Testimonials."),console.error("Error deleting testimonials:",p)}})};return l?e.jsx("div",{children:"Loading..."}):e.jsx(e.Fragment,{children:e.jsx(a.TableBody,{children:i==null?void 0:i.map((s,n)=>e.jsxs(a.TableRow,{children:[e.jsx(a.TableCell,{children:e.jsx("span",{className:"font-semibold uppercase text-sm",children:n+1})}),e.jsx(a.TableCell,{children:s==null?void 0:s.name}),e.jsx(a.TableCell,{children:s==null?void 0:s.designation}),e.jsx(a.TableCell,{children:e.jsx("div",{className:"flex items-center",children:e.jsx("img",{className:"h-12 w-12 rounded-full object-cover",src:U+(s==null?void 0:s.image),alt:s==null?void 0:s.name})})}),e.jsx(a.TableCell,{children:e.jsx(L,{status:s==null?void 0:s.status})}),e.jsx(a.TableCell,{children:e.jsx(R,{onChange:()=>T(s.id),checked:s.status==="Active",onColor:"#10B981",offColor:"#EF4444",uncheckedIcon:!1,checkedIcon:!1})}),e.jsx(a.TableCell,{children:e.jsx(a.Button,{layout:"link",size:"icon","aria-label":"Delete",onClick:()=>h(s==null?void 0:s.id),children:e.jsx(B,{className:"text-red-500 text-2xl"})})})]},n))})})},te=()=>{const{toggleDrawer:i}=u.useContext(C),{data:l,isLoading:m,refetch:o}=I("/testimonials/all","testimonials");return e.jsxs(e.Fragment,{children:[e.jsx(D,{children:"Testimonials"}),e.jsx(A,{children:e.jsx(q,{refetch:o})}),e.jsx(z,{children:e.jsx("div",{className:"flex justify-end",children:e.jsx(a.Button,{onClick:i,className:"mb-4",children:"Add Testimonial"})})}),e.jsx(a.TableContainer,{children:e.jsxs(a.Table,{children:[e.jsx(a.TableHeader,{children:e.jsxs("tr",{children:[e.jsx(a.TableCell,{children:"ID"}),e.jsx(a.TableCell,{children:"Name"}),e.jsx(a.TableCell,{children:"Designation"}),e.jsx(a.TableCell,{children:"Image"}),e.jsx(a.TableCell,{children:"Status"}),e.jsx(a.TableCell,{children:"Action"}),e.jsx(a.TableCell,{children:"Delete"})]})}),e.jsx(Y,{testimonials:l,isLoading:m,refetch:o})]})})]})};export{te as default};
