import{j as e,f as l,r as j,S as A}from"./index-Cv0MCJep.js";import{u as k,a as U}from"./useGetDatas-DUx7WE11.js";import{n as C,a as u}from"./toast-DkhCIWt5.js";import{e as B,S as M,f as q}from"./Layout-D-JsJcP2.js";import{a as L}from"./index.prod-dN6d4wYn.js";import{S as R}from"./sweetalert2.esm.all-B0Dix5B2.js";import{A as z}from"./AnimatedContent-f_qjIjlx.js";import{L as c}from"./LabelArea-Bb7qUJrU.js";import{I as f}from"./InputArea-C4k6rcIG.js";import{u as O}from"./index.esm-CtzVagC9.js";import{D as Y,M as $}from"./MainDrawer-D7Kypkxo.js";import{R as G}from"./quill.snow-5yXoS7a5.js";/* empty css                      */import{P as H}from"./PageTitle-CDKo5HT-.js";import"./iconBase-CHzXLRSI.js";import"./spinner-CkndCogW.js";const Q="http://localhost:5055/api",V=({data:r,isLoading:i,refetch:d})=>{const p=k();console.log(r);const v=async s=>{try{(await p.patch(`/about-us/status/${s}`)).status===200?(C("Status updated successfully!"),d()):u("Failed to update status.")}catch{u("Error updating status.")}},w=async s=>{R.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(async h=>{if(h.isConfirmed)try{(await p.delete(`/about-us/${s}`)).status===200?(C("About deleted successfully!"),d()):u("Failed to delete banner.")}catch(b){u("Error deleting banner."),console.error("Error deleting banner:",b)}})};return e.jsx(e.Fragment,{children:i?e.jsx("p",{className:"text-center text-lg font-semibold",children:"Loading..."}):(r==null?void 0:r.length)>0?e.jsx(l.TableBody,{children:r==null?void 0:r.map(s=>e.jsxs(l.TableRow,{children:[e.jsx(l.TableCell,{className:"font-semibold uppercase text-xs",children:s.id}),e.jsx(l.TableCell,{className:"font-medium text-sm",children:s==null?void 0:s.ownerName}),e.jsx(l.TableCell,{className:"font-medium text-sm",children:s==null?void 0:s.mainTitle}),e.jsx(l.TableCell,{className:"font-medium text-sm",children:s==null?void 0:s.subTitle}),e.jsx(l.TableCell,{className:"font-medium text-sm",children:e.jsx("img",{src:Q+(s==null?void 0:s.mainImage),alt:s==null?void 0:s.mainTitle,className:"w-20 h-20 object-cover rounded-full"})}),e.jsx(l.TableCell,{className:"font-medium text-sm",children:s.status==="Active"?e.jsx("span",{className:"text-green-500 font-semibold",children:"Active"}):e.jsx("span",{className:"text-red-500 font-semibold",children:"Inactive"})}),e.jsx(l.TableCell,{children:e.jsx(L,{onChange:()=>v(s==null?void 0:s.id),checked:(s==null?void 0:s.status)==="Active",onColor:"#10B981",offColor:"#EF4444",uncheckedIcon:!1,checkedIcon:!1})}),e.jsx(l.TableCell,{children:e.jsx(l.Button,{layout:"link",size:"icon","aria-label":"Delete",onClick:()=>w(s==null?void 0:s.id),children:e.jsx(B,{className:"text-red-500 text-2xl"})})})]},s.id))}):e.jsx("p",{className:"text-center text-lg font-semibold text-red-500",children:"No About Content available."})})},W=({refetch:r})=>{const{register:i,handleSubmit:d,reset:p,setValue:v,formState:{errors:w,isSubmitting:s}}=O(),h=k(),{closeDrawer:b}=j.useContext(A),[T,D]=j.useState(""),[a,N]=j.useState({signatureImage:null,mainImage:null,secondaryImage:null}),[x,I]=j.useState({signatureImage:null,mainImage:null,secondaryImage:null}),y=(n,m)=>{const g=n.target.files[0],t=5*1024*1024;if(g.size>t){u("Image size must be less than 5MB."),N(o=>({...o,[m]:null})),I(o=>({...o,[m]:null}));return}g&&(N(o=>({...o,[m]:g})),I(o=>({...o,[m]:URL.createObjectURL(g)})))},E=async n=>{var m,g;try{const t=new FormData;Object.keys(n).forEach(S=>{t.append(S,n[S])}),a!=null&&a.signatureImage&&t.append("signatureImage",a==null?void 0:a.signatureImage),a!=null&&a.mainImage&&t.append("mainImage",a==null?void 0:a.mainImage),a!=null&&a.secondaryImage&&t.append("secondaryImage",a==null?void 0:a.secondaryImage),(await h.post("/about-us/add",t,{headers:{"Content-Type":"multipart/form-data"}})).status===201&&(C("About Us created successfully."),p(),b(),N({signatureImage:null,mainImage:null,secondaryImage:null}),I({signatureImage:null,mainImage:null,secondaryImage:null}),r())}catch(t){console.error("About Us creation failed:",t),u(((g=(m=t.response)==null?void 0:m.data)==null?void 0:g.message)||"About Us creation failed.")}},F={toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{align:[]}],[{color:[]},{background:[]}],["blockquote","code-block"],["link","image","video"],["clean"],["custom-check"]]},P=["header","bold","italic","underline","strike","list","bullet","script","indent","align","color","background","blockquote","code-block","link","image","video"];return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx("h1",{className:"text-4xl text-center mt-4",children:"About-Us"})}),e.jsx(M,{children:e.jsx("form",{onSubmit:d(E),children:e.jsxs("div",{className:"px-6 pt-8 flex-grow scrollbar-hide w-full max-h-full",children:[e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(c,{label:"Main Title"}),e.jsx("div",{className:"col-span-6 sm:col-span-4",children:e.jsx(f,{required:!0,register:i,name:"mainTitle",type:"text",placeholder:"Please Enter Main Title"})})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(c,{label:"Sub Title"}),e.jsx("div",{className:"col-span-6 sm:col-span-4",children:e.jsx(f,{required:!0,register:i,name:"subTitle",type:"text",placeholder:"Please Enter Sub Title"})})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-28 relative",children:[e.jsx(c,{label:"Description"}),e.jsxs("div",{className:"col-span-6 sm:col-span-4",children:[e.jsx(G,{value:T,modules:F,formats:P,onChange:n=>{D(n),v("description",n)},placeholder:"Write something...",className:"h-[300px]"}),e.jsx("input",{type:"hidden",...i("description"),value:T})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6 relative",children:[e.jsx(c,{label:"Owner Name"}),e.jsx("div",{className:"col-span-6 sm:col-span-4",children:e.jsx(f,{required:!0,register:i,name:"ownerName",type:"text",placeholder:"Enter Owner Name"})})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6 relative",children:[e.jsx(c,{label:"Designation"}),e.jsx("div",{className:"col-span-6 sm:col-span-4",children:e.jsx(f,{required:!0,register:i,name:"designation",type:"text",placeholder:"Enter Designation"})})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6 relative",children:[e.jsx(c,{label:"Signature Images"}),e.jsx("div",{className:"col-span-6 sm:col-span-4",children:e.jsx("input",{type:"file",accept:"image/*",onChange:n=>y(n,"signatureImage"),className:"border border-gray-300 rounded-lg p-2 block w-full cursor-pointer"})}),x.signatureImage&&e.jsx("img",{src:x.signatureImage,alt:"Signature Preview",className:"mt-2 w-32 h-32 object-cover rounded-lg"})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6 relative",children:[e.jsx(c,{label:"Main Images"}),e.jsx("div",{className:"col-span-6 sm:col-span-4",children:e.jsx("input",{type:"file",accept:"image/*",onChange:n=>y(n,"mainImage"),className:"border border-gray-300 rounded-lg p-2 block w-full cursor-pointer"})}),x.mainImage&&e.jsx("img",{src:x.mainImage,alt:"Main Preview",className:"mt-2 w-32 h-32 object-cover rounded-lg"})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6 relative",children:[e.jsx(c,{label:"Secondary Images"}),e.jsx("div",{className:"col-span-6 sm:col-span-4",children:e.jsx("input",{type:"file",accept:"image/*",onChange:n=>y(n,"secondaryImage"),className:"border border-gray-300 rounded-lg p-2 block w-full cursor-pointer"})}),x.secondaryImage&&e.jsx("img",{src:x.secondaryImage,alt:"Secondary Preview",className:"mt-2 w-32 h-32 object-cover rounded-lg"})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-44 relative",children:[e.jsx(c,{label:"Status"}),e.jsx("div",{className:"col-span-6 sm:col-span-4",children:e.jsxs("select",{...i("status",{required:!0}),className:"border border-gray-300 rounded-lg p-2 block w-full bg-white",children:[e.jsx("option",{value:"Active",children:"Active"}),e.jsx("option",{value:"Inactive",children:"Inactive"})]})})]}),e.jsx(Y,{isSubmitting:s})]})})})]})},me=()=>{const{data:r,isLoading:i,refetch:d}=U("about-us/all","all-about-us"),{toggleDrawer:p}=j.useContext(A);return e.jsxs(e.Fragment,{children:[e.jsx(H,{children:"About US"}),e.jsx($,{children:e.jsx(W,{refetch:d})}),e.jsx(z,{children:e.jsx("div",{className:"w-full flex justify-end mb-12 items-end",children:e.jsxs(l.Button,{onClick:p,className:"w-2/12 rounded-md h-12",children:[e.jsx("span",{className:"mr2",children:e.jsx(q,{})}),"Add AboutUs"]})})}),e.jsx(l.TableContainer,{children:e.jsxs(l.Table,{children:[e.jsx(l.TableHeader,{children:e.jsxs("tr",{children:[e.jsx(l.TableCell,{children:"ID"}),e.jsx(l.TableCell,{children:"Name"}),e.jsx(l.TableCell,{children:"Main Title"}),e.jsx(l.TableCell,{children:"Sub Title"}),e.jsx(l.TableCell,{children:"Main Image"}),e.jsx(l.TableCell,{children:"Status"}),e.jsx(l.TableCell,{children:"Action"}),e.jsx(l.TableCell,{children:"Delete"})]})}),e.jsx(V,{data:r==null?void 0:r.data,isLoading:i,refetch:d})]})})]})};export{me as default};
