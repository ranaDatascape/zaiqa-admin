import{i as M,j as e,f as t,k as G,r as k,S as K}from"./index-Cv0MCJep.js";import{u as E,k as Q,m as W}from"./Layout-D-JsJcP2.js";import{e as I}from"./exportFromJSON-BvevaQwb.js";import{a as X}from"./toast-DkhCIWt5.js";import{u as Z}from"./useAsync-Dx79ITIc.js";import{u as ee}from"./useFilter-BVpARHJI.js";import{O as L}from"./OrderServices-BNO0wO1d.js";import{N as te}from"./NotFound-Kgr5jKYC.js";import{P as se}from"./PageTitle-CDKo5HT-.js";import{S as ae}from"./Status-Bv5uCwnZ.js";import{T as le}from"./Tooltip-BAEq7O6p.js";import"./index-BjHxYK0B.js";/* empty css                      */import{S as ne}from"./SelectStatus-P0K5OFDe.js";import{T as ie}from"./TableLoading-B7jc0TEa.js";import{s as re}from"./spinner-CkndCogW.js";import{A as oe}from"./AnimatedContent-f_qjIjlx.js";import"./iconBase-CHzXLRSI.js";import"./browser-DAe6cXmg.js";import"./index-CgSWhKad.js";import"./useDisableForDemo-DndbcQrQ.js";import"./CustomerServices-RCtKxH8V.js";import"./CouponServices-Bwlwibye.js";import"./CurrencyServices-BK8AbJu1.js";import"./ProductServices-8BRK73zt.js";import"./react-tooltip.min-CdAfhqXP.js";import"./index-D52NM8LP.js";const ce=d=>{const c=new Date(d),m=String(c.getDate()).padStart(2,"0"),s=String(c.getMonth()+1).padStart(2,"0"),x=c.getFullYear();let r=c.getHours();const h=String(c.getMinutes()).padStart(2,"0"),j=r>=12?"PM":"AM";r=r%12,r=r||12;const p=String(r).padStart(2,"0");return`${m}/${s}/${x}, ${p}:${h} ${j}`},de=({orders:d})=>{const{t:c}=M(),{getNumberTwo:m}=E();return e.jsx(e.Fragment,{children:e.jsx(t.TableBody,{className:"dark:bg-gray-900",children:d==null?void 0:d.map((s,x)=>{var r;return e.jsxs(t.TableRow,{children:[e.jsx(t.TableCell,{children:e.jsx("span",{className:"font-semibold uppercase text-xs",children:s==null?void 0:s.invoice})}),e.jsx(t.TableCell,{children:e.jsx("span",{className:"text-sm",children:ce(s==null?void 0:s.createdAt)})}),e.jsxs(t.TableCell,{className:"text-xs",children:[e.jsx("span",{className:"text-sm",children:(r=s==null?void 0:s.user_info)==null?void 0:r.name})," "]}),e.jsx(t.TableCell,{children:e.jsx("span",{className:"text-sm font-semibold",children:s==null?void 0:s.paymentMethod})}),e.jsxs(t.TableCell,{children:[e.jsx("span",{className:"text-sm font-semibold",children:m(s==null?void 0:s.total)}),"à§³"]}),e.jsx(t.TableCell,{className:"text-xs",children:e.jsx(ae,{status:s==null?void 0:s.status})}),e.jsx(t.TableCell,{className:"text-center",children:e.jsx(ne,{id:s.id,order:s})}),e.jsx(t.TableCell,{className:"text-right flex justify-end",children:e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("span",{className:"p-2 cursor-pointer text-gray-400 hover:text-emerald-600",children:e.jsx(G,{to:`/order/${s.id}`,children:e.jsx(le,{id:"view",Icon:Q,title:"View Invoice & Print",bgColor:"#059669"})})})})})]},x+1)})})})},Re=()=>{var S,O,D,P;const{time:d,setTime:c,status:m,endDate:s,setStatus:x,setEndDate:r,startDate:h,currentPage:j,searchText:p,searchRef:T,method:v,setMethod:$,setStartDate:N,setSearchText:R,handleChangePage:B,handleSubmitForAll:_,resultsPerPage:C}=k.useContext(K),{t:l}=M(),[b,f]=k.useState(!1),{data:a,loading:V,error:w}=Z(()=>L.getAllOrders({day:d,method:v,status:m,page:j,endDate:s,startDate:h,limit:C,customerName:p})),{currency:H,getNumber:J,getNumberTwo:u}=E(),{dataTable:U,serviceData:y}=ee(a==null?void 0:a.orders),Y=async()=>{var n,g,A;try{f(!0);const o=await L.getAllOrders({page:1,day:d,method:v,status:m,endDate:s,download:!0,startDate:h,limit:a==null?void 0:a.totalDoc,customerName:p}),z=(n=o==null?void 0:o.orders)==null?void 0:n.map(i=>{var F;return{_id:i._id,invoice:i.invoice,subTotal:u(i.subTotal),shippingCost:u(i.shippingCost),discount:u(i==null?void 0:i.discount),total:u(i.total),paymentMethod:i.paymentMethod,status:i.status,user_info:(F=i==null?void 0:i.user_info)==null?void 0:F.name,createdAt:i.createdAt,updatedAt:i.updatedAt}});I({data:z,fileName:"orders",exportType:I.types.csv}),f(!1)}catch(o){f(!1),X(((A=(g=o==null?void 0:o.response)==null?void 0:g.data)==null?void 0:A.message)||(o==null?void 0:o.message))}},q=()=>{c(""),$(""),x(""),r(""),N(""),R(""),T.current.value=""};return e.jsxs(e.Fragment,{children:[e.jsx(se,{children:l("Orders")}),e.jsx(oe,{children:e.jsx(t.Card,{className:"min-w-0 shadow-xs overflow-hidden bg-white dark:bg-gray-800 mb-5",children:e.jsx(t.CardBody,{children:e.jsxs("form",{onSubmit:_,children:[e.jsxs("div",{className:"grid gap-4 lg:gap-4 xl:gap-6 md:gap-2 md:grid-cols-5 py-2",children:[e.jsx("div",{children:e.jsx(t.Input,{ref:T,type:"search",name:"search",placeholder:"Search by Customer Name"})}),e.jsx("div",{children:e.jsxs(t.Select,{onChange:n=>x(n.target.value),children:[e.jsx("option",{value:"Status",defaultValue:!0,hidden:!0,children:l("Status")}),e.jsx("option",{value:"Delivered",children:l("PageOrderDelivered")}),e.jsx("option",{value:"Pending",children:l("PageOrderPending")}),e.jsx("option",{value:"Processing",children:l("PageOrderProcessing")}),e.jsx("option",{value:"Cancel",children:l("OrderCancel")})]})}),e.jsx("div",{children:e.jsxs(t.Select,{onChange:n=>c(n.target.value),children:[e.jsx("option",{value:"Order limits",defaultValue:!0,hidden:!0,children:l("Orderlimits")}),e.jsx("option",{value:"5",children:l("DaysOrders5")}),e.jsx("option",{value:"7",children:l("DaysOrders7")}),e.jsx("option",{value:"15",children:l("DaysOrders15")}),e.jsx("option",{value:"30",children:l("DaysOrders30")})]})}),e.jsx("div",{children:b?e.jsxs(t.Button,{disabled:!0,type:"button",className:"h-12 w-full",children:[e.jsx("img",{src:re,alt:"Loading",width:20,height:10})," ",e.jsx("span",{className:"font-serif ml-2 font-light",children:"Processing"})]}):e.jsxs("button",{onClick:Y,disabled:((S=a==null?void 0:a.orders)==null?void 0:S.length)<=0||b,type:"button",className:`${(((O=a==null?void 0:a.orders)==null?void 0:O.length)<=0||b)&&"opacity-50 cursor-not-allowed bg-emerald-600"} flex items-center justify-center text-sm leading-5 h-12 w-full text-center transition-colors duration-150 font-medium px-6 py-2 rounded-md text-white bg-emerald-500 border border-transparent active:bg-emerald-600 hover:bg-emerald-600 `,children:["Download All Orders",e.jsx("span",{className:"ml-2 text-base",children:e.jsx(W,{})})]})})]}),e.jsxs("div",{className:"grid gap-4 lg:gap-6 xl:gap-6 lg:grid-cols-3 xl:grid-cols-3 md:grid-cols-3 sm:grid-cols-1 py-2",children:[e.jsxs("div",{children:[e.jsx(t.Label,{children:"Start Date"}),e.jsx(t.Input,{type:"date",name:"startDate",onChange:n=>N(n.target.value)})]}),e.jsxs("div",{children:[e.jsx(t.Label,{children:"End Date"}),e.jsx(t.Input,{type:"date",name:"startDate",onChange:n=>r(n.target.value)})]}),e.jsxs("div",{className:"mt-2 md:mt-0 flex items-center xl:gap-x-4 gap-x-1 flex-grow-0 md:flex-grow lg:flex-grow xl:flex-grow",children:[e.jsxs("div",{className:"w-full mx-1",children:[e.jsx(t.Label,{style:{visibility:"hidden"},children:"Filter"}),e.jsx(t.Button,{type:"submit",className:"h-12 w-full bg-emerald-700",children:"Filter"})]}),e.jsxs("div",{className:"w-full",children:[e.jsx(t.Label,{style:{visibility:"hidden"},children:"Reset"}),e.jsx(t.Button,{layout:"outline",onClick:q,type:"reset",className:"px-4 md:py-1 py-3 text-sm dark:bg-gray-700",children:e.jsx("span",{className:"text-black dark:text-gray-200",children:"Reset"})})]})]})]})]})})})}),((D=a==null?void 0:a.methodTotals)==null?void 0:D.length)>0&&e.jsx(t.Card,{className:"min-w-0 shadow-xs overflow-hidden bg-white dark:bg-gray-800 rounded-t-lg rounded-0 mb-4",children:e.jsx(t.CardBody,{children:e.jsx("div",{className:"flex gap-1",children:(P=a==null?void 0:a.methodTotals)==null?void 0:P.map((n,g)=>e.jsx("div",{className:"dark:text-gray-300",children:(n==null?void 0:n.method)&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"font-medium",children:[" ",n.method]})," :"," ",e.jsxs("span",{className:"font-semibold mr-2",children:[H,J(n.total)]})]})},g+1))})})}),V?e.jsx(ie,{row:12,col:7,width:160,height:20}):w?e.jsx("span",{className:"text-center mx-auto text-red-500",children:w}):(y==null?void 0:y.length)!==0?e.jsxs(t.TableContainer,{className:"mb-8 dark:bg-gray-900 overflow-y-auto",children:[e.jsxs(t.Table,{children:[e.jsx(t.TableHeader,{children:e.jsxs("tr",{children:[e.jsx(t.TableCell,{children:l("InvoiceNo")}),e.jsx(t.TableCell,{children:l("TimeTbl")}),e.jsx(t.TableCell,{children:l("CustomerName")}),e.jsx(t.TableCell,{children:l("MethodTbl")}),e.jsx(t.TableCell,{children:l("AmountTbl")}),e.jsx(t.TableCell,{children:l("OderStatusTbl")}),e.jsx(t.TableCell,{children:l("ActionTbl")}),e.jsx(t.TableCell,{className:"text-right",children:l("InvoiceTbl")})]})}),e.jsx(de,{orders:U})]}),e.jsx(t.TableFooter,{children:e.jsx(t.Pagination,{totalResults:a==null?void 0:a.totalDoc,resultsPerPage:C,onChange:B,label:"Table navigation"})})]}):e.jsx(te,{title:"Sorry, There are no orders right now."})]})};export{Re as default};
