import{r as b,S as E,j as e,t as n,f as s}from"./index-Cv0MCJep.js";import{l as U,g as R,e as L,f as O}from"./Layout-D-JsJcP2.js";import{B as q}from"./BulkActionDrawer-BLTFmZ0T.js";import{T as k}from"./Title-6CzNxVGl.js";import{E as v}from"./Error-DhTYXBCu.js";import{I as A}from"./InputArea-C4k6rcIG.js";import{L as T}from"./LabelArea-Bb7qUJrU.js";import{S as H}from"./SwitchToggle-CYdqVLVE.js";import{D as V,M as F}from"./MainDrawer-D7Kypkxo.js";import{u as z}from"./index.esm-CtzVagC9.js";import{C as w}from"./CurrencyServices-BK8AbJu1.js";import{a as D,n as B}from"./toast-DkhCIWt5.js";import{D as I}from"./DeleteModal-BtvCN7mm.js";import{P as G}from"./PageTitle-CDKo5HT-.js";import{u as J}from"./useAsync-Dx79ITIc.js";import{u as K}from"./useFilter-BVpARHJI.js";import{u as P}from"./useToggleDrawer-C1UtrQV4.js";import{T as Q}from"./TableLoading-B7jc0TEa.js";import{C as M}from"./CheckBox-BjUk9WJe.js";import{E as W}from"./EditDeleteButton-ie0-NJtD.js";import{S as X}from"./ShowHideButton-B7DJuapM.js";import{N as Y}from"./NotFound-Kgr5jKYC.js";import{A as Z}from"./AnimatedContent-f_qjIjlx.js";import"./iconBase-CHzXLRSI.js";/* empty css                      */import"./index-LNM3yfuz.js";import"./Tree-B5pXmuyD.js";import"./TextAreaCom-BOROZaGH.js";import"./useDisableForDemo-DndbcQrQ.js";import"./CustomerServices-RCtKxH8V.js";import"./CouponServices-Bwlwibye.js";import"./ProductServices-8BRK73zt.js";import"./SelectLanguageTwo-DQqql4G2.js";import"./index.prod-dN6d4wYn.js";import"./spinner-CkndCogW.js";import"./AdminServices-DHiG2Q7Q.js";import"./browser-DAe6cXmg.js";import"./index-CgSWhKad.js";import"./index-D52NM8LP.js";import"./Tooltip-BAEq7O6p.js";import"./react-tooltip.min-CdAfhqXP.js";const $=t=>{const[i,d]=b.useState(!0),[p,l]=b.useState(!1),{isDrawerOpen:x,closeDrawer:o,setIsUpdate:h}=b.useContext(E),{handleSubmit:r,register:j,setValue:u,clearErrors:g,formState:{errors:N}}=z(),C=async({symbol:f,name:c})=>{var a,y;try{l(!0);const m={name:c,symbol:f,status:i?"show":"hide"};if(t){const S=await w.updateCurrency(t,m);h(!0),l(!1),B(S.message),o()}else{const S=await w.addCurrency(m);h(!0),l(!1),B(S.message),o()}}catch(m){l(!1),D(((y=(a=m==null?void 0:m.response)==null?void 0:a.data)==null?void 0:y.message)||(m==null?void 0:m.message)),o()}};return b.useEffect(()=>{if(!x){u("name"),u("symbol"),d(!0),g("symbol"),g("name");return}t&&(async()=>{var f,c;try{const a=await w.getCurrencyById(t);a&&(u("name",a.name),u("symbol",a.symbol),d(a.status==="show"))}catch(a){D(((c=(f=a==null?void 0:a.response)==null?void 0:f.data)==null?void 0:c.message)||(a==null?void 0:a.message))}})()},[g,t,x,u]),{errors:N,onSubmit:C,register:j,status:i,setStatus:d,isSubmitting:p,handleSubmit:r}},_=({id:t})=>{const{errors:i,onSubmit:d,register:p,status:l,setStatus:x,isSubmitting:o,handleSubmit:h}=$(t);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full relative p-6 border-b border-gray-100 bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-300",children:t?e.jsx(k,{title:n("UpdateCurrency"),description:n("UpdateCurrencyText")}):e.jsx(k,{title:n("AddCurrency"),description:n("AddCurrencyText")})}),e.jsx(U.Scrollbars,{className:"w-full md:w-7/12 lg:w-8/12 xl:w-8/12 relative dark:bg-gray-700 dark:text-gray-200",children:e.jsxs("form",{onSubmit:h(d),children:[e.jsxs("div",{className:"px-6 pt-8 flex-grow scrollbar-hide w-full max-h-full pb-40",children:[e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(T,{label:n("CurrenciesName")}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(A,{required:!0,register:p,label:"Name",name:"name",type:"text",placeholder:"Name"}),e.jsx(v,{errorName:i.name})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(T,{label:n("CurrenciesSymbol")}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(A,{required:!0,register:p,label:"Symbol",name:"symbol",type:"text",placeholder:"Symbol"}),e.jsx(v,{errorName:i.symbol})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(T,{label:n("CurrenciesEnabled")}),e.jsx("div",{className:"col-span-8 sm:col-span-1 text-align-left",children:e.jsx(H,{processOption:l,handleProcess:x})})]})]}),e.jsx(V,{id:t,title:"Currency",isSubmitting:o})]})})]})},ee=({currency:t,isCheck:i,setIsCheck:d})=>{const{title:p,serviceId:l,handleModalOpen:x,handleUpdate:o}=P(),h=r=>{const{id:j,checked:u}=r.target;d([...i,j]),u||d(i.filter(g=>g!==j))};return e.jsxs(e.Fragment,{children:[i.length<1&&e.jsx(I,{id:l,title:p}),e.jsx(F,{children:e.jsx(_,{id:l})}),e.jsx(s.TableBody,{children:t==null?void 0:t.map(r=>e.jsxs(s.TableRow,{children:[e.jsx(s.TableCell,{children:e.jsx(M,{type:"checkbox",name:r.symbol,id:r._id,handleClick:h,isChecked:i.includes(r._id)})}),e.jsx(s.TableCell,{className:"text-center",children:e.jsx("span",{className:"font-medium text-sm",children:r.name})}),e.jsx(s.TableCell,{className:"text-center",children:e.jsx("span",{className:"font-medium text-sm",children:r.symbol})}),e.jsx(s.TableCell,{className:"text-center",children:e.jsx(X,{id:r._id,status:r.status,currencyStatusName:"status"})}),e.jsx(s.TableCell,{children:e.jsx(W,{title:r.name,id:r._id,handleUpdate:o,handleModalOpen:x})})]},r._id))})]})},He=()=>{const{toggleDrawer:t}=b.useContext(E),{allId:i,handleUpdateMany:d,handleDeleteMany:p}=P(),{data:l,loading:x,error:o}=J(w.getAllCurrency),{totalResults:h,resultsPerPage:r,dataTable:j,handleChangePage:u,handleSubmitCurrency:g,currencyRef:N}=K(l),[C,f]=b.useState(!1),[c,a]=b.useState([]),y=()=>{f(!C),a(l.map(m=>m._id)),C&&a([])};return e.jsxs(e.Fragment,{children:[e.jsx(G,{children:"Currencies"}),e.jsx(q,{ids:i,title:"Currencies"}),e.jsx(F,{children:e.jsx(_,{})}),e.jsx(I,{ids:i,setIsCheck:a,title:"Selected Currencies"}),e.jsx(Z,{children:e.jsx(s.Card,{className:"min-w-0 shadow-xs overflow-hidden bg-white dark:bg-gray-800 mb-5",children:e.jsx(s.CardBody,{children:e.jsxs("form",{onSubmit:g,className:"py-3 grid gap-4 lg:gap-6 xl:gap-6 md:flex xl:flex md:justify-between",children:[e.jsx("div",{className:"w-full",children:e.jsx(s.Input,{ref:N,type:"search",placeholder:n("SearchIsoCode")})}),e.jsxs("div",{className:"lg:flex  md:flex xl:justify-end xl:w-1/2  md:w-full md:justify-start flex-grow-0",children:[e.jsx("div",{className:"w-full md:w-40 lg:w-40 xl:w-40 mr-3 mb-3 lg:mb-0",children:e.jsxs(s.Button,{disabled:c.length<1,onClick:()=>d(c),className:"w-full rounded-md h-12 btn-gray text-gray-600",children:[e.jsx("span",{className:"mr-2",children:e.jsx(R,{})}),"Bulk Action"]})}),e.jsx("div",{className:"w-full md:w-32 lg:w-32 xl:w-32 mr-3 mb-3 lg:mb-0",children:e.jsxs(s.Button,{disabled:c.length<1,onClick:()=>p(c),className:"w-full rounded-md h-12 bg-red-500 btn-red",children:[e.jsx("span",{className:"mr-2",children:e.jsx(L,{})}),"Delete"]})}),e.jsxs(s.Button,{onClick:t,className:"rounded-md h-12 w-48",children:[e.jsx("span",{className:"mr-2",children:e.jsx(O,{})}),"Add Currency"]})]})]})})})}),x?e.jsx(Q,{row:12,col:7,width:163,height:20}):o?e.jsx("span",{className:"text-center mx-auto text-red-500",children:o}):l.length!==0&&e.jsxs(s.TableContainer,{className:"mb-8 rounded-b-lg",children:[e.jsxs(s.Table,{children:[e.jsx(s.TableHeader,{children:e.jsxs("tr",{children:[e.jsx(s.TableCell,{children:e.jsx(M,{type:"checkbox",name:"selectAll",id:"selectAll",isChecked:C,handleClick:y})}),e.jsx(s.TableCell,{className:"text-center",children:n("CurrenciesName")}),e.jsx(s.TableCell,{className:"text-center",children:n("CurrenciesSymbol")}),e.jsx(s.TableCell,{className:"text-center",children:n("CurrenciesEnabled")}),e.jsx(s.TableCell,{className:"text-right",children:n("CurrenciesActions")})]})}),e.jsx(ee,{currency:j,isCheck:c,setIsCheck:a})]}),e.jsx(s.TableFooter,{children:e.jsx(s.Pagination,{totalResults:h,resultsPerPage:r,onChange:u,label:"Table navigation"})})]}),!x&&l.length===0&&!o&&e.jsx(Y,{title:"Sorry, There are no currency right now."})]})};export{He as default};
